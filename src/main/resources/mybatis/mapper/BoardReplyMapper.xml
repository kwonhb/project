<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.dao.BoardReplyDao">
<insert id="insertReply" parameterType="com.spring.dto.BoardReplyDto">
	insert into reply values(reply_seq.nextval, #{postid}, #{repcon}, sysdate, #{userid})
</insert>

<insert id="boardwrite" parameterType="com.spring.dto.BoardReplyDto">
	insert into board (postid, userid, title, postcon, pictureid, postdate, readcount, head) values(board_seq.nextval, #{userid}, #{title}, #{postcon}, #{pictureid}, sysdate, 0, #{head})
</insert>



<select id="selectReply" parameterType="int" resultType="com.spring.dto.BoardReplyDto">
	select * from reply where postid = #{postid} order by replydate desc 
</select>

<select id="postnodto" parameterType="int" resultType="com.spring.dto.BoardDto">
	select * from board where postid = #{postid}
</select>

<update id="boardupdate" parameterType="com.spring.dto.BoardReplyDto">
	update board set title=#{title}, postcon=#{postcon}, pictureid=#{pictureid}
	where postid=#{postid}
</update>

<update id="readcount" parameterType="int">
	update board readcount set readcount = (readcount+1) where postid = #{postno}
</update>

<delete id="deleteReply" parameterType="int">
	delete from reply where replyid = #{replyid} 
</delete>

<delete id="boarddelete" parameterType="int">
	delete from board where postid = #{postid}
</delete>

</mapper>
